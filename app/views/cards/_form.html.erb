<div class="container" style="margin-top: 20px;">
  <form enctype="multipart/form-data" action="<%= @card.id ? ("/cards/#{@card.id}") : '/cards' %>" accept-charset="UTF-8" method="post">
    <input name="utf8" type="hidden" value="✓">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <% if @card.id %>
      <input type="hidden" name="_method" value="patch">
    <% end %>

    <% if @card.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@card.errors.count, "error") %> prohibited this card from being saved:</h2>

        <ul>
          <% @card.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <label>사진</label>
      <img id="card-img" style="width: 100%;" src="<%= @card.img %>"><br>
      <input type="file" class="form-control-file" accept="image/*" name="card[img]" onchange="onImgSelected(this)" id="card-img-file">
    </div>

    <div class="form-group">
      <label>내용</label>
      <textarea class="form-control" rows="3" name="card[content]"><%= @card.content %></textarea>
    </div>

    <input type="submit" class="btn btn-primary" name="commit" value="<%= @card.id ? '수정하기' : '만들기' %>">
  </form>
</div>

<script>
    function onImgSelected() {
        if (this.value !== '') {
            const oFReader = new FileReader();
            oFReader.readAsDataURL(document.getElementById('card-img-file').files[0]);
            oFReader.onload = function (oFREvent) {
                document.getElementById('card-img').src = oFREvent.target.result;
            };
        }
    }
</script>